{% extends 'base.html' %}

{% block title %}
{{ title }}
{% endblock %}

{% block content %}

		<!-- TABLE AND CARDS SECTION -->
		<div class="col-9">
				<br>
				<h2> {{title}} </h2>
			{% include 'modalcss.html' %}
			
<!--Update Item-->
			<div id="id01" class="modal">
				
			  
				<form class="modal-content animate" method="POST">
					{{ form_update.hidden_tag() }}
					<fieldset class="form-group">
						<legend class="border-bottom mb-4">{{ legend }}</legend>
						<div class="form-group">
								{{ form_update.item_name.label(class="form-control-label") }}
							{% if form_update.item_name.errors %}
								{{ form_update.item_name(class="form-control form-control-lg is-invalid") }}
								<div class="invalid-feedback">
									{% for error in form_update.item_name.errors %}
										<span>{{ error }}</span>
									{% endfor %}
								</div>
							{% else %}
								{{ form_update.item_name(class="form-control form-control-lg") }}
							{% endif %}
						</div>
						<div class="form-group">
							{{ form_update.status.label(class="form-control-label") }}
							{% if form_update.status.errors %}
								{{ form_update.status(class="form-control form-control-lg is-invalid") }}
								<div class="invalid-feedback">
									{% for error in form_update.status.errors %}
										<span>{{ error }}</span>
									{% endfor %}
								</div>
							{% else %}
								{{ form_update.status(class="form-control form-control-lg") }}
							{% endif %}
						</div>
						<div class="form-group">
							{{ form_update.category.label(class="form-control-label") }}
							{% if form_update.category.errors %}
								{{ form_update.category(class="form-control form-control-lg is-invalid") }}
								<div class="invalid-feedback">
									{% for error in form_update.category.errors %}
										<span>{{ error }}</span>
									{% endfor %}
								</div>
							{% else %}
								{{ form_update.category(class="form-control form-control-lg") }}
							{% endif %}
						</div>
						<div class="form-group">
							{{ form_update.quantity.label(class="form-control-label") }}
							{% if form_update.quantity.errors %}
								{{ form_update.quantity(class="form-control form-control-lg is-invalid") }}
								<div class="invalid-feedback">
									{% for error in form_update.quantity.errors %}
										<span>{{ error }}</span>
									{% endfor %}
								</div>
							{% else %}
								{{ form_update.quantity(class="form-control form-control-lg") }}
							{% endif %}
						</div>
					</fieldset>
					<div class="form-group">
						{{ form_update.submit(class="btn btn-outline-info") }}
					</div>
				</form>
			</div>
<!--End Update Item-->
<!---Borrow Item-->
			<div id="id02" class="modal">
			 
				<form class="modal-content animate" method="POST">
					
					<fieldset class="form-group">
						<div class="form-group">
							{{ form.borrow_fname.label(class="form-control-label") }}
							{% if form.borrow_fname.errors %}
								{{ form.borrow_fname(class="form-control form-control-lg is-invalid") }}
								<div class="invalid-feedback">
									{% for error in form_borrow.borrow_fname.errors %}
										<span>{{ error }}</span>
									{% endfor %}
								</div>
							{% else %}
								{{ form.borrow_fname(class="form-control form-control-lg") }}
							{% endif %}
						</div> 	
						<div class="form-group">
							{{ form.borrow_lname.label(class="form-control-label") }}
							{% if form.borrow_lname.errors %}
								{{ form.borrow_lname(class="form-control form-control-lg is-invalid") }}
								<div class="invalid-feedback">
									{% for error in form_borrow.borrow_lname.errors %}
										<span>{{ error }}</span>
									{% endfor %}
								</div>
							{% else %}
								{{ form.borrow_lname(class="form-control form-control-lg") }}
							{% endif %}
						</div> 	
						<div class="form-group">
							{{ form.borrow_idno.label(class="form-control-label") }}
							{% if form.borrow_idno.errors %}
								{{ form.borrow_idno(class="form-control form-control-lg is-invalid") }}
								<div class="invalid-feedback">
									{% for error in form_borrow.borrow_idno.errors %}
										<span>{{ error }}</span>
									{% endfor %}
								</div>
							{% else %}
								{{ form.borrow_idno(class="form-control form-control-lg") }}
							{% endif %}
						</div> 	
						<div class="form-group">
							{{ form.borrow_college.label(class="form-control-label") }}
							{% if form.borrow_college.errors %}
								{{ form.borrow_college(class="form-control form-control-lg is-invalid") }}
								<div class="invalid-feedback">
									{% for error in form.borrow_college.errors %}
										<span>{{ error }}</span>
									{% endfor %}
								</div>
							{% else %}
								{{ form.borrow_college(class="form-control form-control-lg") }}
							{% endif %}
						</div> 
						<div class="form-group">
							{{ form.borrow_course.label(class="form-control-label") }}
							{% if form.borrow_course.errors %}
								{{ form.borrow_course(class="form-control form-control-lg is-invalid") }}
								<div class="invalid-feedback">
									{% for error in form.borrow_course.errors %}
										<span>{{ error }}</span>
									{% endfor %}
								</div>
							{% else %}
								{{ form.borrow_course(class="form-control form-control-lg") }}
							{% endif %}
						</div> 
						<div class="form-group">
							{{ form.borrow_status.label(class="form-control-label") }}
							{% if form.borrow_status.errors %}
								{{ form.borrow_status(class="form-control form-control-lg is-invalid") }}
								<div class="invalid-feedback">
									{% for error in form.borrow_status.errors %}
										<span>{{ error }}</span>
									{% endfor %}
								</div>
							{% else %}
								{{ form.borrow_status(class="form-control form-control-lg") }}
							{% endif %}
						</div> 
						
					</fieldset>
					<div class="form-group">
						{{ form.submit(class="btn btn-outline-info") }}
					</div>
				</form>
				
				</div>
<!--End Borrow Item -->

			<div class="container mt-3" >
			<div class="card-deck" size="10%" >
				
					{% for i in item %}
			  <div class="card shadow" >
			    <img src="../static/img/logo.jpg"  class="card-img-top p-1">
			    <div class="card-body">
			      <center><h5 class="card-title">{{i['item_name']}}</h5></center>
			    </div>
			    <div class="card-footer">
				  <center><small class="text-muted">{{i['category']}}</small></center>
				  <center><small class="text-muted">{{i['status']}}</small></center>
				  <center><small class="text-muted">qnty: {{i['quantity']}}</small></center>
				  <a onclick="document.getElementById('id01').style.display='block'" size="auto" class="btn btn-outline-dark">Edit Item</a>
				  <a onclick="document.getElementById('id02').style.display='block'" size="auto" class="btn btn-outline-dark">Borrow Item</a>
				  <br>
				  <br>
                  <form action="{{ url_for('deleteitem', item_id=i.item_id) }}" method="POST">
                    <input class="btn btn-danger" type="submit" value="Delete">
                  </form>
			    </div>
			  </div>
			<br>  
			  {% endfor %}
			
            </div>
            </div>
        </div>
	</div>
			<br>

			<div class="container mt-3">
					<div class="card-deck">
						
							{% for i in borrow %}
						
							{% if i.borrow_status == 'Borrowed' %}
					  <div class="card shadow" style="height: 10%;">
						<img src="../static/img/logo.jpg" class="card-img-top p-1">
						<div class="card-body">
							
								{% for j in i.items_id %}
						  <center><h5 class="card-title">{{j.item_name}}</h5></center>
								  {% endfor %}
						</div>
						<div class="card-footer">
						 <center><small class="text-muted">Borrower: {{i['borrow_fname']}} {{i['borrow_lname']}}</small></center>
						  <center><small class="text-muted">ID No: {{i['borrow_idno']}}</small></center>
						  <center><small class="text-muted">College: {{i['borrow_college']}}</small></center>
						  <center><small class="text-muted">Course: {{i['borrow_course']}}</small></center>
						
						</div>
					  </div>
					<br> 
					{% endif %}
					
					  {% endfor %}
					
					
					</div>
					<br>
					</div>
			
			</div>	
		</div>
	</div>
{% endblock %}
